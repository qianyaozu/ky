webpackJsonp([1],{"6IZA":function(e,t){},Bh6B:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),s=a("zL8q"),l=a.n(s),o=(a("tvR6"),a("n4oI"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var n=a("VU/8")({name:"app"},o,!1,function(e){a("6IZA")},null,null).exports,r=a("/ocq"),c=a("NYxO");i.default.use(c.a);var d={Token:localStorage.getItem("Token"),UserName:localStorage.getItem("UserName"),MineName:localStorage.getItem("MineName"),CurrentPath:localStorage.getItem("CurrentPath")},u=new c.a.Store({state:d});function m(e,t){"UserName"===e?d.UserName=t:"MineName"===e?d.MineName=t:"Token"===e?d.Token=t:"CurrentPath"===e&&(d.CurrentPath=t),localStorage.setItem(e,t)}function p(e){return"UserName"===e?d.UserName:"MineName"===e?d.MineName:"Token"===e?d.Token:"CurrentPath"===e?d.CurrentPath:void 0}var h=a("mtWM"),f=a.n(h);function v(){this.Method="",this.DBName="",this.Table="",this.Data="",this.OrderBy="",this.Limit=0,this.Skip=0,this.Select={},this.UpdateAll=!1,this.Distinct="",this.Condition={}}v.prototype={Get:function(e,t,a,i,s,l,o){var n=new v;return n.Method="get",n.DBName="ky",n.Table=e,n.Data=t,n.orderBy=a,n.Limit=i,n.Skip=s,n.Distinct=l,n.Select=o,n},Page:function(e,t,a,i,s,l,o){var n=new v;return n.Method="page",n.DBName="ky",n.Table=e,n.Data=t,n.orderBy=a,n.Limit=i,n.Skip=s,n.Distinct=l,n.Select=o,n},Count:function(e,t){var a=new v;return a.Method="count",a.DBName="ky",a.Table=e,a.Data=t,a},Update:function(e,t,a,i){var s=new v;return s.Method="update",s.DBName="ky",s.Table=e,s.Data=t,s.UpdateAll=i,s.Condition=a,s},Add:function(e,t,a){var i=new v;return i.Method="add",i.DBName="ky",i.Table=e,i.Data=t,i.Condition=a,i},Delete:function(e,t){var a=new v;return a.Method="delete",a.DBName="ky",a.Table=e,a.Data=t,a}};var b={data:function(){return{MineName:"",ChangeMineName:"",UserName:"admin",CurrentPath:"",BackupDialogVisible:!1,RestoreDialogVisible:!1,RestartSerialDialogVisible:!1,SystemConfigDialogVisible:!1,HelpDialogVisible:!1,ComName:"",BaudRate:1200,Parity:0,Password:""}},methods:{logout:function(){m("Token",0),m("UserName",""),m("MineName",""),this.$router.push("/Login")},selectMenu:function(e){m("CurrentPath",e)},doBackup:function(){var e=this;f.a.post("/api/backup",null).then(function(t){1===t.data.State?(e.$message.success("备份完成"),e.BackupDialogVisible=!1):e.$message.error(t.data.Message)})},doRestart:function(){var e=this;f.a.post("/api/restart",null).then(function(t){1===t.data.State?(e.$message.success("重启完成"),e.RestartSerialDialogVisible=!1):e.$message.error(t.data.Message)})},dorestore:function(){var e=this;f.a.post("/api/restore",null).then(function(t){1===t.data.State?(e.$message.success("还原完成"),e.RestoreDialogVisible=!1):e.$message.error(t.data.Message)})},SystemConfigSubmit:function(){var e=this;f.a.post("/api/updateSystemConfig",{MineName:this.ChangeMineName,ComName:this.ComName,BaudRate:this.BaudRate,Password:this.Password}).then(function(t){1===t.data.State?(e.$message.success("修改成功"),e.MineName=e.ChangeMineName,m("MineName",e.MineName),e.SystemConfigDialogVisible=!1):e.$message.error(t.data.Messgae)})},GetAlarm:function(){}},created:function(){var e=this;f.a.post("/api/querySystemConfig",null).then(function(t){1===t.data.State&&null!=t.data.Data&&(e.MineName=t.data.Data.MineName,e.ChangeMineName=e.MineName,e.ComName=t.data.Data.ComName,e.BaudRate=t.data.Data.BaudRate,e.Password=t.data.Data.Password,m("MineName",e.MineName))}),this.UserName=p("UserName"),this.CurrentPath=p("CurrentPath"),""===this.CurrentPath&&(this.CurrentPath="/SensorSet")}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticClass:"fixed-header"},[a("el-row",{staticClass:"row-bg",staticStyle:{height:"inherit"},attrs:{type:"flex"}},[a("el-col",{attrs:{span:5}},[a("span",{staticClass:"minename"},[e._v(e._s(e.MineName))])]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.CurrentPath,router:!0,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.selectMenu}},[a("el-menu-item",{attrs:{index:""},on:{click:function(t){e.SystemConfigDialogVisible=!0}}},[e._v("系统配置")]),e._v(" "),a("el-menu-item",{attrs:{index:"/SensorSet"}},[e._v("传感器配置")]),e._v(" "),a("el-menu-item",{attrs:{index:"/SensorRealTimeData"}},[e._v("实时数据")]),e._v(" "),a("el-menu-item",{attrs:{index:"/SensorHisData"}},[e._v("历史数据")]),e._v(" "),a("el-submenu",{attrs:{index:"6"}},[a("template",{slot:"title"},[e._v("工具")]),e._v(" "),a("el-menu-item",{attrs:{index:""},on:{click:function(t){e.BackupDialogVisible=!0}}},[e._v("备份")]),e._v(" "),a("el-menu-item",{attrs:{index:""},on:{click:function(t){e.RestartSerialDialogVisible=!0}}},[e._v("重启串口")])],2),e._v(" "),a("el-menu-item",{attrs:{index:""},on:{click:function(t){e.HelpDialogVisible=!0}}},[e._v("帮助")])],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"user"},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:e.logout}},[e._v("退出")]),e._v(" "),a("span",[e._v(e._s(e.UserName))])])])],1)],1),e._v(" "),a("el-container",[a("el-aside",{attrs:{width:"30px"}}),e._v(" "),a("el-main",[a("router-view")],1)],1),e._v(" "),a("el-footer",{staticClass:"fixed-footer"}),e._v(" "),a("el-dialog",{attrs:{title:"备份",visible:e.BackupDialogVisible,width:"30%"},on:{"update:visible":function(t){e.BackupDialogVisible=t}}},[a("span",[e._v("是否开始执行备份")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.BackupDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.doBackup}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"重启串口",visible:e.RestartSerialDialogVisible,width:"30%"},on:{"update:visible":function(t){e.RestartSerialDialogVisible=t}}},[a("span",[e._v("是否开确认重启串口")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.RestartSerialDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.doRestart}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"还原",visible:e.RestoreDialogVisible,width:"30%"},on:{"update:visible":function(t){e.RestoreDialogVisible=t}}},[a("span",[e._v("是否开始执行还原")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.RestoreDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dorestore}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"帮助",visible:e.HelpDialogVisible,width:"30%"},on:{"update:visible":function(t){e.HelpDialogVisible=t}}},[a("span",[e._v("煤矿压力监测管理系统v1.0")])]),e._v(" "),a("el-dialog",{attrs:{title:"系统配置",visible:e.SystemConfigDialogVisible,width:"500px",center:"","custom-class":"success-modal","show-close":!1,"close-on-click-model":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.SystemConfigDialogVisible=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[a("el-row",[a("el-form-item",{attrs:{label:"煤矿名称",prop:"MineName"}},[a("el-input",{staticClass:"nameStyle",staticStyle:{width:"85%"},model:{value:e.ChangeMineName,callback:function(t){e.ChangeMineName=t},expression:"ChangeMineName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"串口名称",prop:"ComName"}},[a("el-input",{staticClass:"nameStyle",staticStyle:{width:"85%"},model:{value:e.ComName,callback:function(t){e.ComName=t},expression:"ComName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"波特率",prop:"Baud"}},[a("el-input",{staticClass:"nameStyle",staticStyle:{width:"85%"},attrs:{type:"number"},model:{value:e.BaudRate,callback:function(t){e.BaudRate=t},expression:"BaudRate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"Baud"}},[a("el-input",{staticClass:"nameStyle",staticStyle:{width:"85%"},attrs:{type:"password"},model:{value:e.Password,callback:function(t){e.Password=t},expression:"Password"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.SystemConfigSubmit()}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.SystemConfigDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")(b,g,!1,function(e){a("kQIL")},null,null).exports,y={data:function(){return{username:"",password:"",loading:!1,MineName:""}},methods:{login:function(){var e=this;""!==this.username&&""!==this.password?(this.loading=!0,f.a.post("/api/login",{UserName:this.username,Password:this.password}).then(function(t){e.loading=!1,t.data?0!==t.data.State?(m("UserName",t.data.Data.UserName),m("Token",t.data.Data.Token),e.$router.push("/SensorSet")):e.$message.error(t.data.Message):e.$message.error("登录失败")})):this.$message.error("请输入用户名或密码")}},created:function(){p("Token")>0&&this.$router.push("/Main")}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"title"},[e._v("矿山压力监测系统")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"loginbtn",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var k=a("VU/8")(y,_,!1,function(e){a("Bh6B")},null,null).exports,D=a("XLwt"),w=a.n(D);function C(e){var t=new Date(e),a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()},i="yyyy-MM-dd hh:mm:ss";/(y+)/i.test(i)&&(i=i.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in a)new RegExp("("+s+")").test(i)&&(i=i.replace(RegExp.$1,1===RegExp.$1.length?a[s]:("00"+a[s]).substr((""+a[s]).length)));return i}var N={data:function(){return{DataList:[],StartTime:null,EndTime:null,SensorList:[],SelectedID:0}},methods:{Query:function(){for(var e=this,t={ID:this.SelectedID,StartTime:this.StartTime,EndTime:this.EndTime},a=null,i=0;i<this.SensorList.length;i++)if(this.SensorList[i].ID===this.SelectedID){a=this.SensorList[i];break}this.chart=w.a.init(document.getElementById("Chart")),f.a.post("/api/querySensorHistory",t).then(function(t){e.DataList=t.data.Data;for(var i=new Array,s=new Array,l=new Array,o=0;o<e.DataList.length;o++)i.push(C(e.DataList[o].CreateTime)),s.push(e.DataList[o].FirstValue),l.push(e.DataList[o].SecondValue);e.chart.clear(),e.chart.setOption({title:{text:a.Name+"历史数据"},tooltip:{},xAxis:{data:i},yAxis:{name:0===a.SensorType?"兆帕":"千牛"},series:[{name:"前柱",type:"line",data:s},{name:"后柱",type:"line",data:l}]})})}},mounted:function(){var e=this;f.a.post("/api/getAllSensor",this.QueryForm).then(function(t){e.SensorList=t.data.Data,e.SensorList.length>0&&(e.SelectedID=e.SensorList[0].ID),e.StartTime=new Date,e.EndTime=new Date,e.Query()})}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"tb-header",staticStyle:{height:"auto"}},[a("span",[e._v("历史数据")]),e._v(" "),a("el-form",{attrs:{"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"传感器"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.SelectedID,callback:function(t){e.SelectedID=t},expression:"SelectedID"}},e._l(e.SensorList,function(e,t){return a("el-option",{key:t,attrs:{label:e.Name,value:e.ID}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始时间"},model:{value:e.StartTime,callback:function(t){e.StartTime=t},expression:"StartTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"结束时间"},model:{value:e.EndTime,callback:function(t){e.EndTime=t},expression:"EndTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-button",{on:{click:e.Query}},[e._v("查询")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"chart",staticStyle:{width:"100%",height:"400px"},attrs:{id:"Chart"}})])},staticRenderFns:[]},M=a("VU/8")(N,x,!1,null,null,null).exports,T={data:function(){return{TableName:"SensorSet",searchName:"",RowChecked:[],MultipleSelection:[],DataList:[],addVisible:!1,deleteVisible:!1,editVisible:!1,QueryForm:{Name:""},AddForm:{ID:null,WorkPlace:"",SensorType:0,FirstValue:0,SecondValue:0,CreateTime:null},EditForm:{ID:null,WorkPlace:"",SensorType:0,FirstValue:0,SecondValue:0,CreateTime:null},options:[{value:0,label:"压力传感器"},{value:1,label:"锚杆传感器"}]}},methods:{format:function(e){return e.substring(0,10)},GetSensorType:function(e){return 0===e?"压力传感器":"锚杆传感器"},validate:function(e){return""===e.ID?(this.$message.error("编号不能为空"),!1):(e.ID=parseInt(e.ID+""),""===e.Name?(this.$message.error("传感器名称不能为空"),!1):""===e.WorkPlace?(this.$message.error("传感器工作地不能为空"),!1):(e.SensorType=parseInt(e.SensorType+""),!0))},tableRowClassName:function(e){e.row;var t=e.rowIndex;return this.RowChecked.indexOf(t)>=0?"checked-bg":""},SelectionChange:function(e){this.RowChecked=[],this.MultipleSelection=e;var t=[];this.MultipleSelection.map(function(e,a){t.push(e.ID)}),this.RowChecked=t},delSubmit:function(){var e=this,t={ID:this.RowChecked};f.a.post("/api/deleteSensor",t).then(function(t){0===t.data.State?e.$message.error("删除失败"+t.data.Message):(e.$message.success("删除成功"),e.Query(),e.deleteVisible=!1)}).catch(function(t){e.$message.error("删除失败"+t)})},addSubmit:function(){var e=this;this.validate(this.AddForm)&&f.a.post("/api/insertSensor",this.AddForm).then(function(t){0===t.data.State?e.$message.error("新增失败"+t.data.Message):(e.$message.success("新增成功"),e.Query(),e.addVisible=!1)}).catch(function(t){e.$message.error("新增失败"+t)})},addOpen:function(){this.EditForm.ID=0,this.EditForm.Name="",this.EditForm.WorkPlace="",this.EditForm.SensorType=0,this.addVisible=!0},editOpen:function(){if(0!==this.RowChecked.length)if(this.RowChecked.length>1)this.$message.error("请选中单个传感器");else{var e=this.MultipleSelection[0];this.EditForm.ID=e.ID,this.EditForm.Name=e.Name,this.EditForm.WorkPlace=e.WorkPlace,this.EditForm.SensorType=e.SensorType,this.editVisible=!0}else this.$message.error("请选中传感器")},deleteOpen:function(){0!==this.RowChecked.length?this.deleteVisible=!0:this.$message.error("请选中传感器")},editSubmit:function(){var e=this;this.validate(this.EditForm)&&f.a.post("/api/updateSensor",this.EditForm).then(function(t){0===t.data.State?e.$message.error("修改失败"+t.data.Message):(e.$message.success("修改成功"),e.Query(),e.editVisible=!1)}).catch(function(t){e.$message.error("修改失败"+t)})},searchSubmit:function(){this.Query()},Query:function(){var e=this;f.a.post("/api/querySensor",this.QueryForm).then(function(t){e.DataList=t.data.Data})}},created:function(){this.Query()}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"tb-header"},[a("span",[e._v("传感器配置")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.addOpen()}}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.editOpen()}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-circle-close-outline"},on:{click:function(t){e.deleteOpen()}}},[e._v("删除")]),e._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchSubmit(t)}},model:{value:e.QueryForm.Name,callback:function(t){e.$set(e.QueryForm,"Name",t)},expression:"QueryForm.Name"}},[a("el-button",{staticStyle:{color:"rgba(25, 158, 216, 1)"},attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchSubmit},slot:"append"})],1)],1),e._v(" "),a("el-table",{attrs:{data:e.DataList,tooltipEffect:"dark","row-class-name":e.tableRowClassName},on:{"selection-change":e.SelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ID",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{label:"名称",prop:"Name"}}),e._v(" "),a("el-table-column",{attrs:{label:"安装位置",prop:"WorkPlace"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SensorType",label:"传感器类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.GetSensorType(t.row.SensorType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"FirstValue",label:"A点数据"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SecondValue",label:"B点数据"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CreateTime",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.format(t.row.CreateTime))+"\n      ")]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增传感器",visible:e.addVisible,width:"500px",center:"","custom-class":"success-modal","show-close":!1,"close-on-click-model":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.AddForm,"label-width":"100px"}},[a("el-row",[a("el-form-item",{attrs:{label:"传感器编号",prop:"ID"}},[a("el-input",{staticClass:"nameStyle",staticStyle:{width:"85%"},attrs:{type:"number"},model:{value:e.AddForm.ID,callback:function(t){e.$set(e.AddForm,"ID",t)},expression:"AddForm.ID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"传感器名称",prop:"WorkPlace"}},[a("el-input",{staticClass:"nameStyle",staticStyle:{width:"85%"},model:{value:e.AddForm.Name,callback:function(t){e.$set(e.AddForm,"Name",t)},expression:"AddForm.Name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"传感器位置",prop:"WorkPlace"}},[a("el-input",{staticClass:"nameStyle",staticStyle:{width:"85%"},model:{value:e.AddForm.WorkPlace,callback:function(t){e.$set(e.AddForm,"WorkPlace",t)},expression:"AddForm.WorkPlace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"传感器类型",prop:"SensorType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.AddForm.SensorType,callback:function(t){e.$set(e.AddForm,"SensorType",t)},expression:"AddForm.SensorType"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addSubmit()}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改传感器",visible:e.editVisible,width:"500px",center:"","custom-class":"success-modal","show-close":!1,"close-on-click-model":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.EditForm,"label-width":"100px"}},[a("el-row",[a("el-form-item",{attrs:{label:"支架编号",prop:"Name"}},[a("el-input",{staticClass:"nameStyle",staticStyle:{width:"85%"},attrs:{type:"number",disabled:!0},model:{value:e.EditForm.ID,callback:function(t){e.$set(e.EditForm,"ID",t)},expression:"EditForm.ID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支架名称",prop:"Name"}},[a("el-input",{staticClass:"nameStyle",staticStyle:{width:"85%"},model:{value:e.EditForm.Name,callback:function(t){e.$set(e.EditForm,"Name",t)},expression:"EditForm.Name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安装位置",prop:"InstallPosition"}},[a("el-input",{staticClass:"nameStyle",staticStyle:{width:"85%"},attrs:{type:"number"},model:{value:e.EditForm.WorkPlace,callback:function(t){e.$set(e.EditForm,"WorkPlace",t)},expression:"EditForm.WorkPlace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"传感器类型",prop:"SensorType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.EditForm.SensorType,callback:function(t){e.$set(e.EditForm,"SensorType",t)},expression:"EditForm.SensorType"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editSubmit()}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"删除",visible:e.deleteVisible,width:"500px",center:"","custom-class":"danger-modal","show-close":!1},on:{"update:visible":function(t){e.deleteVisible=t}}},[a("span",[e._v("确定要"),a("span",{staticStyle:{color:"red"}},[e._v("删除")]),e._v("选中数据么?")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delSubmit()}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.deleteVisible=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]},V=a("VU/8")(T,F,!1,null,null,null).exports,I={data:function(){return{DataList:[],SelectedIndex:0,options:[{value:0,label:"压力传感器"},{value:1,label:"锚杆传感器"}]}},methods:{Query:function(){var e=this,t={ID:this.SelectedIndex};this.chart=w.a.init(document.getElementById("Chart")),f.a.post("/api/querySensorRealTime",t).then(function(a){e.DataList=a.data.Data;for(var i=new Array,s=new Array,l=new Array,o=0;o<e.DataList.length;o++)i.push(e.DataList[o].Name),s.push(e.DataList[o].FirstValue),l.push(e.DataList[o].SecondValue);e.chart.clear(),0==t.ID?e.chart.setOption({title:{text:"实时数据"},tooltip:{},xAxis:{data:i},yAxis:{name:"兆帕"},series:[{name:"前柱",type:"bar",data:s,color:"red",barWidth:"20px"},{name:"后柱",type:"bar",data:l,color:"blue",barWidth:"20px"}]}):e.chart.setOption({title:{text:"实时数据"},tooltip:{},xAxis:{data:i},yAxis:{name:"千牛"},series:[{name:"前柱",type:"bar",data:s,color:"red",barWidth:"20px"}]})})}},created:function(){},mounted:function(){this.Query()}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{"label-width":"80px"}},[a("el-row",[a("div",{staticClass:"tb-header"},[a("span",[e._v("实时数据")]),e._v(" "),a("el-form",{attrs:{"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"传感器"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.SelectedIndex,callback:function(t){e.SelectedIndex=t},expression:"SelectedIndex"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-button",{on:{click:e.Query}},[e._v("查询")])],1)],1)],1)],1)],1)]),e._v(" "),a("el-row",[a("div",{staticClass:"chart",staticStyle:{width:"100%",height:"400px"},attrs:{id:"Chart"}})])],1)],1)},staticRenderFns:[]},$=a("VU/8")(I,R,!1,null,null,null).exports;i.default.use(r.a);var E=new r.a({routes:[{path:"/Main",name:"Main",redirect:"/Main",component:S,children:[{path:"/SensorHisData",name:"SensorHisData",component:M,hidden:!0},{path:"/SensorSet",name:"SensorSet",component:V,hidden:!0},{path:"/SensorRealTimeData",name:"SensorRealTimeData",component:$,hidden:!0}]},{path:"/Login",name:"Login",component:k,hidden:!0}]});i.default.config.productionTip=!1,i.default.use(l.a),E.beforeEach(function(e,t,a){a()}),new i.default({el:"#app",router:E,store:u,template:"<App/>",components:{App:n}})},kQIL:function(e,t){},n4oI:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.10047221caae5b0f796a.js.map